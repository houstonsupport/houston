<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Houston Support Desk</title>
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="application/assets/css/normalize.css">
    <link rel="stylesheet" href="application/assets/css/styles.css">
    
    <link rel="icon" type="image/x-icon" href="application/assets/favicon.ico" />
    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script type="text/javascript" src="application/assets/backbone/lib/underscore-min.js"></script>
	<script type="text/javascript" src="application/assets/backbone/lib/backbone-min.js"></script>
	<script type="text/javascript" src="application/assets/backbone/lib/handlebars.js"></script>

	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/houston.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/datahelper.js"></script>

	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/models/usermodel.js"></script>	
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/models/clientmodel.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/models/ticketmodel.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/models/fileuploadmodel.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/models/messagemodel.js"></script>	
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/models/ticketdetailmodel.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/models/agentmodel.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/models/clientusermodel.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/collections/clients.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/collections/tickets.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/collections/filesupload.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/collections/messages.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/collections/agents.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/collections/users.js"></script>
	
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/views/ticketview.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/views/ticketsview.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/views/formview.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/views/peopleview.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/views/fileuploadview.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/views/messagesview.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/views/clientsview.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/views/accountview.js"></script>
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/views/analyticsview.js"></script>
	
	<script type="text/javascript" src="application/assets/backbone/ticketapp/js/app.js"></script>	
</head>
<body class="ticket-body">
<div class="mob-menu">
	<img class="logo" src="application/assets/img/logo@2x.png" />
	<ul>
		<li><a href="#"><i class="icon-comment"></i>All Tickets</a></li>
		<li><a href="#/people"><i class="icon-user"></i>People</a></li>
		<li><a href="#/analytics"><i class="icon-cog"></i>Analytics</a></li>
		<li><a href="#/account"><i class="icon-cog"></i>Account</a></li>
		<li><a href="/auth/logout"><i class="icon-logout"></i>Log Out</a></li>
	</ul>
	<div class="mob-peek">
	</div>
</div>
<div class="outer-wrap">
    <div class="app-wrap">
		<header>
			<img class="logo" src="application/assets/img/logo@2x.png" />
			
			<div class="grip">
				<i class="icon-menu"></i>
			</div>
			
			<nav>
				<a href="#">Tickets</a>
				<a href="#/people">People</a>
				<a href="#/analytics">Analytics</a>
				<a href="#/account">Account</a>
				<a href="/auth/logout">Log Out</a>
			</nav>
		</header>
		
		<div id="app" class="box-app-wrap"></div>
		
		<footer>
			<div class="copy">
				&copy;Copyright 2015 Houston Support Desk
			</div>
		</footer>
	</div>
</div>

<script>
	$(document).ready(function(){
		$('.grip').click(function(){
			if($('.outer-wrap').css('right') == '0px'){
				$('.outer-wrap').animate({right: '268px'}, 400);
			} else {
				$('.outer-wrap').animate({right: '0px'}, 400);
			}
		});

	});
</script>

<div href="" id="notice"><span></span><i class="close">x</i></div>

<!-- Node.js Notify - Refactor this code into Backbone app.js -->
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script>
	// Connect to namespaced socket using company ID
	var socket = io('http://80.82.116.223:3000/54da7ddad21a58157f46c975');	// Hard coded company ID for testing
	
	// On receiving a notify event display the notification popup
	socket.on('notify', function(data) {		
		$('#notice span').html(data);
		$('#notice').fadeIn(1000, function() { $(this).delay(5000).fadeOut(1000); });
		socket.emit('response', 'success');
	});
	
	// On receiving a sync event trigger backbone sync on the appropriate model / collection
	socket.on('sync', function(data) {
		// Sync all backbone collections and models
	});
	
	// Close notification popup
	$('#notice .close').click( function() {
		$(this).parent().hide();
	});
</script>
</body>
</html>